//Staff
//Manager can also see but he cannot cancel or do any changes to the leave application
//but he can approve or reject and add comment so we will have to change some buttons access
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Leave Detail</title>
</head>

<body>
	<!-- Header -->
	<header id="header">
		<a href="/" class="logo">LAPS</a>
	</header>
	<br />
	<br />
	<h2 style="text-align: center"> Product Details</h2>
	<form action="#" th:object="${Leave}" method="post" th:action = "${session.view == 'manager' ? '/manager/updateStatus' : '/staff/update'}">
		<table style="width:50%; margin-left: auto; margin-right: auto;">
			<tr>
				<!--grey-->
			</tr>
			<tr>
				<th><input type="hidden" th:field="*{id}" th:value="*{getId()}">Date Applied:
				</th>
				<td><input type="date" th:field="*{date_applied}" th:value="*{getDate_applied()}" readonly></td>
			</tr>
			<tr>
				<!--grey-->
			</tr>
			<tr>
				<th>Start Date</th>
				<td th:if="${session.view == 'staff' && session.permission == 'true'}"><input type="date" th:field="*{leave_start}" th:value="*{getLeave_start()}"></td>
				<td th:if="${session.view == 'manager' || session.permission == 'false'}"><input type="date" th:field="*{leave_start}" th:value="*{getLeave_start()}" readonly></td>
			</tr>
			<tr>
				<!--grey-->
			</tr>
			<tr>
				<!--grey-->
			</tr>
			<tr>
				<th>End Date</th>
				<td th:if="${session.view == 'staff' && session.permission == 'true'}"><input type="date" th:field="*{leave_end}" th:value="*{getLeave_end()}"></td>
				<td th:if="${session.view == 'manager' || session.permission == 'false'}"><input type="date" th:field="*{leave_end}" th:value="*{getLeave_end()}" readonly></td>
			</tr>
			<tr>
				<!--grey-->
			</tr>
			<tr th:if="${session.view == 'manager' && session.permission == 'true'}">
				<th>Status</th>
				<!--<td><input type="text" th:field="*{status}" th:value="*{getStatus()}"></td>-->
				<td>
					<select th:field = "*{status}">
						<option th:value="Approved" style = "color: springgreen;">Approve</option>
						<option th:value="Rejected" style = "color:red">Reject</option>
					</select>
				</td>
			</tr>
			<tr th:if="${session.view == 'staff' || session.permission == 'false'}">
				<th>Status</th>
				<td><input type = "text" th:field = "*{status}" th:value = "*{getStatus()}" readonly></td>
			</tr>
			<tr>
				<th>Comment</th>
				<td th:if="${session.permission == 'true'}"><input type="text" th:field="*{comment}" th:value="*{getComment()}"></td>
				<td th:if = "${session.permission == 'false'}"><input type = "text" th:field = "*{comment}" th:value = "*{getComment()}"></td>
			</tr>
			<tr>
				<th>Leave Count</th>
				<td><input type="number" th:field="*{leavecount}" th:value="*{getLeavecount()}" readonly></td>
			</tr>
			<tr>
				<th>Leave Type</th>
				<td><span th:text="*{leavetype.leaveType}"></span><input type="hidden" th:field="*{leavetype}" th:value="*{getLeavetype()}"></td>
			</tr>
			<tr>
				<!--grey--><input type = "hidden" th:field="*{staff}" th:value="*{getStaff()}">
			</tr>
			<tr>
				<td>
				</td>
				<td th:if = "${session.permission == 'true'}">
					<input type="submit" name = "action" value="Update" />
				</td>
				<td th:if = "${session.permission == 'true' && session.view == 'staff'}">
					<input type="submit" name = "action" value="Delete" />
				</td>
				<td th:if = "${session.permission == 'false' && session.view == 'staff'}">
					<input type="submit" name = "action" value="Cancel" />
				</td>
			</tr>
		</table>
	</form>
	<table style="width:50%; margin-left: auto; margin-right: auto; border:
white;">
		<tr>
		</tr>
		<tr>
			<td style="text-align: center; font-weight: bold;"><a href="#"
					onclick="history.go(-1); return false;">Back</a></td>
		</tr>
	</table>
	<br />
</body>

</html>